![PROJECT_PHOTO](https://github.com/AlexGyver/gyverControl/blob/master/proj_img.jpg)
# Кконтроллер для теплицы и инкубатора на Arduino
* [Описание проекта](#chapter-0)
* [Папки проекта](#chapter-1)
* [Схемы подключения](#chapter-2)
* [Материалы и компоненты](#chapter-3)
* [Как скачать и прошить](#chapter-4)
* [FAQ](#chapter-5)
* [Полезная информация](#chapter-6)
[![AlexGyver YouTube](http://alexgyver.ru/git_banner.jpg)](https://www.youtube.com/channel/UCgtAOyEQdAyjvm9ATCi_Aig?sub_confirmation=1)

<a id="chapter-0"></a>
## Описание проекта
**GyverControl** - универсальный контроллер-таймер для теплицы, инкубатора, аквариума, квартиры, дома и других мест, где нужна автоматизация по таймеру или показателям микроклимата/другим датчикам. Ссылки на все компоненты, схемы, инструкции и другая информация находятся на странице проекта на официальном сайте: https://alexgyver.ru/gyvercontrol/.  
   
#### Особенности:
- 10 каналов управления. Из них (в разных комбинациях):
	- 9 каналов с логическим выходом 5V, к которым можно подключать обычное реле, твердотельное реле, силовые ключи (транзисторы, модули на основе транзисторов)
	- 2 канала сервоприводов, подключаются обычные модельные серво больших и маленьких размеров
	- 2 канала ШИМ с высокой частотой (1 кГц) для управления скоростью моторов, яркостью светодиодных лент, мощностью обогревателей
	- 2 канала ШИМ с низкой частотой (1 Гц) для управления мощностью обогревателей
	- 1 канал управления линейным электроприводом с концевиками ограничения движения и работой по тайм-ауту
- Бортовой датчик температуры и влажности воздуха (BME280)
- 4 канала для датчиков, могут работать в разных сочетаниях:
	- 4 аналоговых датчика (влажности почвы или любых других)
	- DHT11/DHT22 – цифровой датчик температуры и влажности
	- Термистор – аналоговый датчик температуры
	- DS18b20 (Dallas) – цифровой датчик температуры. Возможна установка нескольких (с версии 1.6)
	- MH-Z19 – датчик углекислого газа (с версии 1.5)
- Модуль опорного (реального) времени RTC DS3231 с автономным питанием
- Большой LCD дисплей (LCD 2004, 20 столбцов, 4 строки)
- Орган управления - энкодер
- Периодичный полив (реле)
- Схема с индивидуальными помпами/клапанами
- Схема с одной помпой и несколькими клапанами
- Полив на основе показаний датчиков влажности почвы
- Управление освещением (реле) с привязкой ко времени суток
- Проветривание (привод открывает окно/серво открывает заслонку) по датчику температуры или влажности воздуха
- Увлажнение (включение увлажнителя) по датчику влажности воздуха
- Обогрев (включение обогревателя) по датчику температуры
- Выполнение действий сервоприводом (нажатие кнопок на устройствах, поворот рукояток, поворот заслонок, перемещение предметов) по датчику или таймеру
- Режимы:
	- Таймер – простой периодический таймер
	- Таймер RTC – периодический таймер с привязкой к реальному времени
	- Неделька – работа в выбранный промежуток времени в выбранные дни недели
	- Сенсор – релейная работа по выбранному датчику с настройкой периода опроса и гистерезисом
	- ПИД – регулятор для высокоточного поддержания заданного значения с датчика
	- Рассвет – плавное включение и выключение (закат) источника освещения в выбранное время
- Дополнительные фишки:
	- Расписание ПИД регулятора
	- Автотюнер коэффициентов ПИД

<a id="chapter-1"></a>
## Папки
**ВНИМАНИЕ! Если это твой первый опыт работы с Arduino, читай [инструкцию](#chapter-4)**
- **libraries** - библиотеки проекта. Заменить имеющиеся версии
- **firmware** - прошивки для Arduino
- **schemes** - схемы подключения компонентов
- **docs** - документация, картинки
- **PCB** - файлы печатной платы

<a id="chapter-2"></a>
## Схемы
![SCHEME](https://github.com/AlexGyver/gyverControl/blob/master/schemes/scheme1.jpg)
![SCHEME](https://github.com/AlexGyver/gyverControl/blob/master/PCB/PCBmap.jpg)

<a id="chapter-3"></a>
## Материалы и компоненты
### Ссылки оставлены на магазины, с которых я закупаюсь уже не один год
Arduino NANO 328p – искать
* https://ali.ski/OCB3g
* https://ali.ski/3xnDr
* https://ali.ski/Jg6II
* https://ali.ski/Mvetd2
Энкодер – искать
* https://ali.ski/plRbSV
* https://ali.ski/Oj_54q
* https://ali.ski/_3OBn
* Дисплей 2004 https://ali.ski/R4S9d
* DS3231 мини https://ali.ski/ba3vp
* Датчик т/вл воздуха BME280 (5V) https://ali.ski/66Fb6
* Драйвер привода https://ali.ski/J9aKo
Датчики вл. почвы

* Обычный https://ali.ski/eBINY
* Золотой https://ali.ski/yJ7QoZ
* Ёмкостный https://ali.ski/7on9m
Аналоговые датчики

* Освещённости https://ali.ski/iPlgCB
* Термистор https://ali.ski/1LJzio
* Звука https://ali.ski/xfkoz-
* ИК излучения https://ali.ski/HzLw3
* Дождя https://ali.ski/YNpbF
* Уровня воды https://ali.ski/1W1UE
* Газоанализатор https://ali.ski/sFq6Ui
Модули реле

* Обычные https://ali.ski/fPI0LA–D
* Твердотельные https://ali.ski/tKNXy
* Одноканальное мощное SSR https://ali.ski/wHmFh
Сервоприводы

* Малый (2 кг*см) https://ali.ski/4ooo1
* Большой (13 кг*см) https://ali.ski/8njdL
* Большой (20 кг*см) https://ali.ski/TqGb9
* Очень большой (60 кг*см) https://ali.ski/szxWaB
Линейные приводы

* Привод 100мм 12V (скорость я брал 45mm/s) https://ali.ski/SSRGN
Железки для теплицы

Средняя помпа
* https://ali.ski/lsj8U7
* https://ali.ski/PdwZZq
Мощная помпа
* https://ali.ski/mRfM9r
* https://ali.ski/Eyxn_m
* https://ali.ski/GMXFqY
* https://ali.ski/iQUn8
* Клапан 1/2″ https://ali.ski/7LLGH
Лампочки с полным спектром
* https://ali.ski/aBt_m9
* ttp://ali.ski/8Qi8a0
* Матрицы с полным спектром https://ali.ski/Hus5TP
* Готовые полноспектровые светильники https://ali.ski/7SwSO
Разное

* БП 5V 2A питание схемы https://ali.ski/K-jzh
* БП 12V 3A питание привода https://ali.ski/MGBFu https://ali.ski/njmEV5  https://ali.ski/vL8VPn
* Кнопки искать https://ali.ski/0XHLSV
* Кнопки NC https://ali.ski/mEAzJ
* Кнопки NO https://ali.ski/Rv3u5L
* Концевик герметичный https://ali.ski/piKKYr https://ali.ski/pbXGui
* Колодки https://ali.ski/ZK7qq
* Рейка контактная https://ali.ski/mhYWXr
* Рейка угловая https://ali.ski/RPjbwD
* В наших магазинах

* Рейка контактная https://www.chipdip.ru/product/pls-40
* Рейка угловая тройная PLT-120R https://www.chipdip.ru/product/plt-120r-pitch-2-54-mm

## Вам скорее всего пригодится
* [Всё для пайки (паяльники и примочки)](http://alexgyver.ru/all-for-soldering/)
* [Недорогие инструменты](http://alexgyver.ru/my_instruments/)
* [Все существующие модули и сенсоры Arduino](http://alexgyver.ru/arduino_shop/)
* [Электронные компоненты](http://alexgyver.ru/electronics/)
* [Аккумуляторы и зарядные модули](http://alexgyver.ru/18650/)

<a id="chapter-4"></a>
## Как скачать и прошить
* [Первые шаги с Arduino](http://alexgyver.ru/arduino-first/) - ультра подробная статья по началу работы с Ардуино, ознакомиться первым делом!
* Скачать архив с проектом
> На главной странице проекта (где ты читаешь этот текст) вверху справа зелёная кнопка **Clone or download**, вот её жми, там будет **Download ZIP**
* Установить библиотеки в  
`C:\Program Files (x86)\Arduino\libraries\` (Windows x64)  
`C:\Program Files\Arduino\libraries\` (Windows x86)
* **Подключить внешнее питание 5 Вольт**
* Подключить Ардуино к компьютеру
* Запустить файл прошивки (который имеет расширение .ino)
* Настроить IDE (COM порт, модель Arduino, как в статье выше)
* Настроить что нужно по проекту
* Нажать загрузить
* Пользоваться  

## Настройки в коде
    #define ENCODER_TYPE 1      // тип энкодера (0 или 1). Если энкодер работает некорректно (пропуск шагов/2 шага), смените тип
    #define ENC_REVERSE 0       // 1 - инвертировать направление энкодера, 0 - нет
    #define DRIVER_LEVEL 1      // 1 или 0 - уровень сигнала на драйвер/реле для привода
    #define LCD_ADDR 0x3f       // адрес дисплея 0x27 или 0x3f . Смени если не работает!!
<a id="chapter-5"></a>
## FAQ
### Основные вопросы
В: Как скачать с этого грёбаного сайта?  
О: На главной странице проекта (где ты читаешь этот текст) вверху справа зелёная кнопка **Clone or download**, вот её жми, там будет **Download ZIP**

В: Скачался какой то файл .zip, куда его теперь?  
О: Это архив. Можно открыть стандартными средствами Windows, но думаю у всех на компьютере установлен WinRAR, архив нужно правой кнопкой и извлечь.

В: Я совсем новичок! Что мне делать с Ардуиной, где взять все программы?  
О: Читай и смотри видос http://alexgyver.ru/arduino-first/

В: Вылетает ошибка загрузки / компиляции!
О: Читай тут: https://alexgyver.ru/arduino-first/#step-5

В: Сколько стоит?  
О: Ничего не продаю.

### Вопросы по этому проекту

<a id="chapter-6"></a>
## Полезная информация
* [Мой сайт](http://alexgyver.ru/)
* [Основной YouTube канал](https://www.youtube.com/channel/UCgtAOyEQdAyjvm9ATCi_Aig?sub_confirmation=1)
* [YouTube канал про Arduino](https://www.youtube.com/channel/UC4axiS76D784-ofoTdo5zOA?sub_confirmation=1)
* [Мои видеоуроки по пайке](https://www.youtube.com/playlist?list=PLOT_HeyBraBuMIwfSYu7kCKXxQGsUKcqR)
* [Мои видеоуроки по Arduino](http://alexgyver.ru/arduino_lessons/)